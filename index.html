<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bestellliste Can Supermarkt</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 18px;
      background-color: #f9f9f9;
      padding: 40px;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 30px;
    }

    h1 {
      text-align: center;
      font-size: 32px;
      color: #333;
      margin-bottom: 20px;
    }

    #searchBar {
      width:100%;
      padding:10px;
      font-size:18px;
      margin-bottom:20px;
      border-radius:6px;
      border:1px solid #ccc;
      box-sizing: border-box;
    }

    .section {
      margin-bottom: 15px;
    }

    label {
      font-weight: bold;
      display: block;
      margin-bottom: 8px;
    }

    select, input[type="number"] {
      width: 48%;
      font-size: 18px;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      padding: 8px;
      border-bottom: 1px solid #eee;
    }

    li:nth-child(even) {
      background-color: #f7f7f7;
    }

    #sendMailBtn {
      display: block;
      width: 100%;
      margin-top: 20px;
      padding: 14px;
      font-size: 20px;
      border: none;
      border-radius: 8px;
      background-color: #28a745;
      color: white;
      cursor: pointer;
    }

    #sendMailBtn:hover { background-color: #218838; }
  </style>
</head>
<body>
  <div class="container">
    <h1>🛒 Bestellliste</h1>

    <!-- Suchleiste -->
    <input id="searchBar" type="text" placeholder="🔍 Artikel suchen...">

    <!-- Auswahl Supermarkt -->
    <div class="section">
      <label for="supermarkt">Supermarkt auswählen:</label>
      <select id="supermarkt">
        <option value="Can 1">Can 1</option>
        <option value="Can 2">Can 2</option>
      </select>
    </div>

    <!-- Produktliste -->
    <ul id="product-list">
      <li>Äpfel golden kg <input type="number" min="0" value=""></li>
      <li>Äpfel grün kg <input type="number" min="0" value=""></li>
      <li>Äpfel rot KG <input type="number" min="0" value=""></li>
      <li>Apfel Bodensee <input type="number" min="0" value=""></li>
      <li>Apfel red Prince <input type="number" min="0" value=""></li>
      <li>Bananen Chiquita <input type="number" min="0" value=""></li>
      <li>Birnen Conference <input type="number" min="0" value=""></li>
    </ul>

    <!-- Button -->
    <button id="sendMailBtn">Liste absenden</button>
  </div>

  <script>
    // Suche: filtert sichtbare Listeneinträge beim Tippen
    document.getElementById('searchBar').addEventListener('input', function () {
      const filter = this.value.toLowerCase();
      const items = document.querySelectorAll('#product-list li');
      items.forEach(li => {
        const text = li.childNodes[0].textContent.toLowerCase();
        li.style.display = text.includes(filter) ? '' : 'none';
      });
    });

    // Mail-Funktion: sammelt alle Mengen (sichtbar oder nicht) und öffnet Mailclient
    document.getElementById('sendMailBtn').addEventListener('click', function () {
      const supermarkt = document.getElementById('supermarkt').value;
      const items = document.querySelectorAll('#product-list li');
      let body = 'Bestellliste für ' + supermarkt + ':\n\n';

      items.forEach(li => {
        const name = li.childNodes[0].textContent.trim();
        const input = li.querySelector('input[type="number"]');
        const qty = input ? input.value : '';
        if (qty && Number(qty) > 0) {
          body += name + ': ' + qty + '\n';
        }
      });

      const recipients = 'gc1982@hotmail.de, perlach@cansupermarkt.de';
      const mailto = 'mailto:' + recipients +
        '?subject=' + encodeURIComponent('Bestellliste ' + supermarkt) +
        '&body=' + encodeURIComponent(body);

      // öffnet Standard-Mailprogramm (falls konfiguriert)
      window.location.href = mailto;
    });
  </script>
</body>
</html>
